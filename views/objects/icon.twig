{#
Input Data:
name: string // name of the icon
inline: boolean // required for icons that should be displayed as an inline element and not a block
rectangle: boolean // required for icons that are rectangles (not squares) to be properly sized
force_mono: boolean // use in case the monochromatic icons name starts with "color-"
alt: string
is_css: boolean // whether the icon should be loaded with css. This requires adding the icon to the css map in css settings file.
color: string // css color for the icon
#}

{% set name_hint_is_color = name matches '/^color-.*/' %}
{% set is_color = force_mono ? false : name_hint_is_color %}
{% set inline_class = inline ? 'o-icon--inline' : '' %}
{% set icon_variant_class = is_color ? 'o-icon--color' : 'o-icon--mono' %}
{% set rectangle_class = rectangle ? 'o-icon--icon-' ~ name : '' %}

{% if should_use_icons_module() %}
  {% set icon_prefix = 'icon-' %}
  {% set icon_name = icon_prefix ~ name %}
  {% set icon_path = fn('get_template_directory_uri') ~ '/assets/icons/icons.svg' ~ '#' ~ icon_name ~ '-view' %}
{% else %}
  {% set icon_path = fn('get_template_directory_uri') ~ '/assets/icons-source/' ~ name ~ '.svg' %}
{% endif %}

{% set bg_style_variant = is_color ? 'background-image' : 'mask-image' %}
{% set color_style_variant = is_css ? 'color' : 'color' %}
{% set color_style = color ? color_style_variant ~ ': ' ~ color ~ ';' : '' %}

{% if is_css %}
  {% set icon_variant_class = '' %}
  {% set inline_class = 'is-css ' ~ inline_class %}
  {% set inline_style = color_style %}
{% else %}
  {% set inline_style = bg_style_variant ~ ': url(' ~ icon_path ~ ');' ~ color_style %}
{% endif %}

{% set style = inline_style ? 'style="' ~ inline_style ~ '"' : '' %}

<i class="o-icon o-icon--{{ icon_name }} {{ [inline_class, rectangle_class, icon_variant_class]|filter(v => v|length)|join(' ') }}"
  {{ alt ? 'role="img"' : '' }}
  {{ alt ? 'aria-label="' ~ alt ~ '"' : 'aria-hidden="true"' }}
  {{ style }}></i>
